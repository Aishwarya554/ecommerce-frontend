document.addEventListener("DOMContentLoaded",()=>{let e=document.getElementById("login-form"),t=document.getElementById("signup-form"),s=document.getElementById("login-btn"),n=document.getElementById("signup-btn"),a=document.getElementById("logout-btn");s.addEventListener("click",()=>{e.classList.add("active"),t.classList.remove("active")}),n.addEventListener("click",()=>{t.classList.add("active"),e.classList.remove("active")}),t.addEventListener("submit",e=>{e.preventDefault();let n=document.getElementById("signup-email").value,a=document.getElementById("signup-password").value,l=document.getElementById("signup-confirm-password").value,i=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,d=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{8,}$/;if(!i.test(n)){alert("Please enter a valid email.");return}if(!d.test(a)){alert("Password must be 8+ chars, contain uppercase, lowercase, number.");return}if(a!==l){alert("Passwords do not match.");return}firebase.auth().createUserWithEmailAndPassword(n,a).then(()=>{alert("✅ Signup successful!"),t.reset(),s.click()}).catch(e=>{alert("❌ Signup Error: "+e.message)})}),e.addEventListener("submit",e=>{e.preventDefault();let t=document.getElementById("login-email").value,s=document.getElementById("login-password").value;firebase.auth().signInWithEmailAndPassword(t,s).then(()=>{alert("✅ Login successful!"),window.location.href="index.html"}).catch(e=>{alert("❌ Login failed: "+e.message)})}),firebase.auth().onAuthStateChanged(e=>{e?(a.style.display="block",s.style.display="none",n.style.display="none"):(a.style.display="none",s.style.display="inline-block",n.style.display="inline-block",window.location.pathname.includes("auth.html")||(window.location.href="auth.html"))}),a.addEventListener("click",()=>{firebase.auth().signOut().then(()=>{alert("✅ Logged out!"),window.location.href="auth.html"}).catch(e=>{alert("❌ Logout error: "+e.message)})})});