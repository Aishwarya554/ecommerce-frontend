const params=new URLSearchParams(window.location.search),productId=parseInt(params.get("id"));function updateCartCount(){let e=JSON.parse(localStorage.getItem("cart"))||[],t=document.querySelector(".cart-count");t&&(t.textContent=e.length)}fetch("/products.json").then(e=>e.json()).then(e=>{let t=e[productId];if(!t){document.querySelector(".product-info").innerHTML="<p>Product not found.</p>";return}let n=parseFloat(t.price.replace("$",""))||0,r=1,d=document.getElementById("quantity"),o=document.getElementById("total-price");function a(){document.getElementById("product-price").textContent=`$${n.toFixed(2)}`,o.textContent=`Total: $${(n*r).toFixed(2)}`}document.getElementById("increase").addEventListener("click",()=>{r<10&&(r++,d.value=r,a())}),document.getElementById("decrease").addEventListener("click",()=>{r>1&&(r--,d.value=r,a())}),document.getElementById("product-img").src=t.image,document.getElementById("product-img").alt=t.name,document.getElementById("product-name").textContent=t.name,document.getElementById("product-description").textContent="This is a premium, high-quality product picked just for you!",d.value=r,a(),document.getElementById("add-to-cart-btn").addEventListener("click",()=>{let e=document.getElementById("size").value,d=document.getElementById("color").value,o=JSON.parse(localStorage.getItem("cart"))||[],a={id:productId,name:t.name,price:n,image:t.image,selectedSize:e,selectedColor:d,quantity:r},c=o.findIndex(t=>t.id===productId&&t.selectedSize===e&&t.selectedColor===d);-1!==c?o[c].quantity+=r:o.push(a),localStorage.setItem("cart",JSON.stringify(o)),updateCartCount(),alert(`âœ… Added to cart:
${t.name}
Size: ${e}
Color: ${d}
Quantity: ${r}`)})}).catch(e=>{console.error("Error loading product:",e),document.querySelector(".product-info").innerHTML="<p>Error loading product details.</p>"}),updateCartCount();