const params=new URLSearchParams(window.location.search),productId=parseInt(params.get("id"));function updateCartCount(){let e=JSON.parse(localStorage.getItem("cart"))||[],t=document.querySelector(".cart-count");t&&(t.textContent=e.length)}fetch("/products.json").then(e=>e.json()).then(e=>{let t=e[productId];if(!t){document.querySelector(".product-info").innerHTML="<p>Product not found.</p>";return}let n=parseFloat(t.price.replace("$",""))||0,r=1,o=document.getElementById("quantity"),d=document.getElementById("total-price");function a(){d.textContent=`Total: $${(n*r).toFixed(2)}`,document.getElementById("product-price").textContent=`$${(n*r).toFixed(2)}`}document.getElementById("increase").addEventListener("click",()=>{r<10&&(r++,o.value=r,a())}),document.getElementById("decrease").addEventListener("click",()=>{r>1&&(r--,o.value=r,a())}),document.getElementById("product-img").src=t.image,document.getElementById("product-img").alt=t.name,document.getElementById("product-name").textContent=t.name,document.getElementById("product-description").textContent="This is a premium, high-quality product picked just for you!",o.value=r,a(),document.getElementById("add-to-cart-btn").addEventListener("click",()=>{let e=document.getElementById("size").value,n=document.getElementById("color").value,o=JSON.parse(localStorage.getItem("cart"))||[],d={...t,selectedSize:e,selectedColor:n,quantity:r},a=o.findIndex(r=>r.id===t.id&&r.selectedSize===e&&r.selectedColor===n);-1!==a?o[a].quantity+=r:o.push(d),localStorage.setItem("cart",JSON.stringify(o)),updateCartCount(),alert(`âœ… Added to cart:
${t.name}
Size: ${e}
Color: ${n}
Quantity: ${r}`)})}).catch(e=>{console.error("Error loading product:",e),document.querySelector(".product-info").innerHTML="<p>Error loading product details.</p>"}),updateCartCount();const searchInput=document.querySelector(".search-bar");searchInput.addEventListener("input",e=>{let t=e.target.value.toLowerCase(),n=allProducts.filter(e=>e.name.toLowerCase().includes(t)||e.category.toLowerCase().includes(t));displayProducts(n)});