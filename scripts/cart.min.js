document.addEventListener("DOMContentLoaded",()=>{let t=document.getElementById("cart-items-container"),e=JSON.parse(localStorage.getItem("cart"))||[];function n(){let t=e.reduce((t,e)=>t+e.quantity,0),n=document.getElementById("cart-count");n&&(n.textContent=t)}function a(){if(t.innerHTML="",0===e.length){t.innerHTML="<p>Your cart is empty.</p>",n();let a=document.getElementById("checkout-btn");a&&(a.disabled=!0);return}let i=0;e.forEach((e,n)=>{let a=parseFloat(e.price.toString().replace(/[^\d.]/g,"")),c=parseInt(e.quantity)||1,r=a*c;i+=r;let s=document.createElement("div");s.className="cart-item",s.innerHTML=`
        <img src="${e.image}" alt="${e.name}" width="100" />
        <div class="cart-details">
          <h3>${e.name}</h3>
          <p>Price: ₹${a.toFixed(2)}</p>
          <p>Option: ${e.option||"N/A"}</p>
          <div class="qty-controls">
            <button class="qty-btn decrease" data-index="${n}">−</button>
            <span class="qty" id="qty-${n}">${e.quantity}</span>
            <button class="qty-btn increase" data-index="${n}">+</button>
          </div>
          <p class="item-total" id="item-total-${n}">Item Total: ₹${r.toFixed(2)}</p>
          <button class="remove-btn" data-index="${n}">Remove</button>
        </div>
      `,t.appendChild(s)});let c=document.createElement("div");c.id="total-price",c.innerHTML=`<h3>Total: ₹${i.toFixed(2)}</h3>`,t.appendChild(c);let r=document.getElementById("checkout-btn");r&&(r.disabled=!1,r.onclick=()=>{window.location.href="checkout.html"}),n()}e=e.map(t=>({...t,price:"string"==typeof t.price?parseFloat(t.price.replace(/[^0-9.]/g,"")):parseFloat(t.price),quantity:parseInt(t.quantity)||1})),a(),t.addEventListener("click",t=>{let n=t.target.dataset.index;if(t.target.classList.contains("increase")&&e[n].quantity++,t.target.classList.contains("decrease")){if(!(e[n].quantity>1))return;e[n].quantity--}t.target.classList.contains("remove-btn")&&e.splice(n,1),localStorage.setItem("cart",JSON.stringify(e)),a()})});